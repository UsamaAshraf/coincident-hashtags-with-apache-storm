version: '3.2'

services:
    zookeeper:
        build: ./zookeeper
        # Keep it running.  
        tty: true
        
    storm-nimbus:
        build: ./storm-nimbus
        links:
            - zookeeper
        # Map port 6627 on the host machine to port 6627 of the container.
        ports:
            - 6627:6627
        tty: true

    storm-supervisor:
        build: ./storm-supervisor
        links:
            - zookeeper
            - storm-nimbus
        # To access the Storm UI from our host machine.  
        ports:
            - 8080:8080
        tty: true
        volumes:
            - './storm-supervisor:/theproject'

# Host volume used to store our code.
volumes:
    storm-supervisor:
